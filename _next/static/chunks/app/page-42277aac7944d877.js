(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3627:(e,t,l)=>{Promise.resolve().then(l.bind(l,8009))},8009:(e,t,l)=>{"use strict";l.d(t,{default:()=>a});var r=l(5155),i=l(2115);let a=()=>{let[e,t]=(0,i.useState)(6),[l,a]=(0,i.useState)(1),[n,s]=(0,i.useState)([]),[o,u]=(0,i.useState)(1),[m,d]=(0,i.useState)(!1),[c,g]=(0,i.useState)(!1),[p,x]=(0,i.useState)(!1),h=new Audio("/shot.mp3"),S=new Audio("/misfire.mp3"),f=new Audio("/chamber.mp3");function b(e,t){let l=new Set;for(;l.size<e;)l.add(Math.floor(Math.random()*t)+1);return Array.from(l)}return((0,i.useEffect)(()=>{let e=localStorage.getItem("chamberSize"),l=e?Number(e):6,r=localStorage.getItem("numBullets"),i=r?Number(r):1,n=localStorage.getItem("triggerPosition"),o=n?Number(n):1,m=localStorage.getItem("result"),c=!!m&&JSON.parse(m),g=localStorage.getItem("bulletPositions"),p=g?function(e,t,l){let r=Array.from(new Set(e)).filter(e=>e>=1&&e<=l);return r.length===t?r:b(t,l)}(JSON.parse(g),i,l):b(i,l);t(l),a(i),u(o),d(c),s(p),x(!0)},[]),(0,i.useEffect)(()=>{p&&(localStorage.setItem("chamberSize",e.toString()),localStorage.setItem("numBullets",l.toString()),localStorage.setItem("bulletPositions",JSON.stringify(n)),localStorage.setItem("triggerPosition",o.toString()),localStorage.setItem("result",JSON.stringify(m)))},[p,e,l,n,o,m]),p)?(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"40px",minHeight:"100vh"},children:[(0,r.jsx)("h1",{style:{fontSize:"35px",margin:0},onDoubleClick:()=>g(e=>!e),children:"Русская Рулетка"}),m&&(0,r.jsx)("p",{style:{color:"red",fontSize:"35px",fontWeight:"800",margin:"10px"},children:"ТЫ ПРОИГРАЛ"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,r.jsxs)("label",{children:["Размер барабана:",(0,r.jsx)("input",{type:"number",min:"1",value:e,onChange:e=>{let r=Math.max(1,Number(e.target.value));t(r),s(b(l,r)),u(1),d(!1)},style:{margin:"5px",width:"30px",marginTop:"10px"},disabled:m})]}),(0,r.jsxs)("label",{children:["Количество пуль:",(0,r.jsx)("input",{type:"number",min:"1",max:e,value:l,onChange:t=>{let l=Math.min(Math.max(1,Number(t.target.value)),e);a(l),s(b(l,e))},style:{margin:"5px",width:"30px"},disabled:m})]})]}),(0,r.jsxs)("p",{children:["Позиция курка: ",o]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>{n.includes(o)?(null==h||h.play(),d(!0)):(null==S||S.play(),u(o===e?1:o+1))},disabled:m,style:{margin:"10px"},children:"Спустить курок"}),(0,r.jsx)("button",{onClick:()=>{d(!1),u(1),s(b(l,e)),null==f||f.play()},style:{margin:"10px"},children:"Перезарядить"})]}),c&&(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px",flexWrap:"wrap"},children:[...Array(e)].map((e,t)=>(0,r.jsx)("div",{style:{width:"50px",height:"50px",borderRadius:"50%",margin:"5px",backgroundColor:n.includes(t+1)?"red":"gray",outline:o===t+1?"3px solid black":"none"}},t))}),(0,r.jsx)("div",{className:"eddie"})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(3627)),_N_E=e.O()}]);